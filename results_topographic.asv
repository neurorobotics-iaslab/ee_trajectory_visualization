clear all; close all;
couples = {'c7.g1', 'c9.c8', 'g2.d7'};

directory = '/home/paolo/Scaricati/ur_data';
files = get_files(directory);

for i= 1:length(couples)
    
    % Take only files with such couple
    couple_files = file_with_substr(files, strjoin(couples(i)));

    % Load all file of such couple and concatenate them. Tags are ordered
    % by name, so first is tag0, then tag1, and so on and already on base
    % frame
    n_tags = 5;
    %[event, ee, tags, run, session] = load_and_concatenate(couple_files, n_tags); -> works withur_data

    % extract translation ee only of the hit trials
    cues = [5000, 5001, 5002, 5003, 5004];
    a = event.TYP;
    event.TYP = vector_hit(event, cues, 5000, 1000); % hit is a vector same length of event.TYP

    % extract for each run only hit trials
    event_req = [781, 1000, 1001, 1002, 1003, 1004]';
    [ee_run, run_hit] = extract_ee_hit(event, run, ee, event_req);

    % extract for each session only hit trials
    [ee_session, session_hit] = extract_ee_hit(event, session, ee, event_req);

    % draw trajectories
    %draw_trj(ee_run, run_hit, strjoin(couples(i)), 'run');
    %draw_trj(ee_session, session_hit, strjoin(couples(i)), 'session');

    % definition for the plot
    nbins_x = 80;
    nbins_y = 80;

    % plot for each session
    %draw_topographic(ee_session, session_hit, strjoin(couples(i)), nbins_x, nbins_y, 'session');
    %draw_topographic(ee_run, run_hit, strjoin(couples(i)), nbins_x, nbins_y, 'run');

    % frechet distance
    frechet(ee, run, event, tags, tags_order, cues);
    %frechet(ee, session, event, tags);
end

